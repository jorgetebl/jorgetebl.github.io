<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Favicon -->
  <!-- <link rel="shortcut icon" href="../assets/images/favicon.ico" type="image/x-icon" /> -->
  
  <!-- Libs CSS -->
  <link rel="stylesheet" href="../assets/css/libs.bundle.css" />
  
  <!-- Main CSS -->
  <link rel="stylesheet" href="../assets/css/index.bundle.css" />


  <script>
    let isNight=new Date().getHours()<8;
    console.log("isNight: ",isNight)
  </script>


  <style>

.background-section-plants{
        position: absolute;
        left: 0px;
        top:0px;
        width: 100%;
        height: 100%;
      opacity: 0.05;
        background-image: url(../assets/images/lawrence-kayku-frWOcVisp8U-unsplash.jpg);
        background-size: contain;
      }

      .nav-tabs .nav-link.active {
          color: #ffffff;
          border-color: #ffc107;
          background: transparent;
          border-bottom: 4px solid #ffffff;
      }

      .no-knob::after{
          flex-shrink: 0;
          width: 1.25rem;
          height: 1.25rem;
          margin-left: auto;
          content: "";
          background-image: url() !important;
          background-repeat: no-repeat;
          background-size: 1.25rem;
          transition: transform 0.2s ease-in-out;
      }
  </style>
  
  <!-- Title -->
  <title>Carta de Garaje Café</title></head>

<body class="bg-black">


  
  <!-- navbar -->
  <nav id="mainNav" class="navbar fixed-top navbar-expand-lg navbar-sticky navbar-dark">
    <div class="container">
      <a href="https://garajecafe.com" class="navbar-brand"><b>Garaje Café</b></a>
  
      <!-- primary -->
      <div class="collapse navbar-collapse" id="navbar" data-bs-parent="#mainNav">
        <ul class="navbar-nav">
          <li class="nav-item dropdown dropdown-hover">
            <a class="nav-link" href="https://garajecafe.com/?#tardes" id="navbarDropdown-1" role="button" >
              Tardes
            </a>
  
          </li>
          <li class="nav-item dropdown dropdown-hover">
            <a class="nav-link" href="https://garajecafe.com/?#restaurante" id="navbarDropdown-2" role="button" >
              Restaurante
            </a>
          </li>
          <li class="nav-item dropdown dropdown-hover">
            <a class="nav-link" href="https://garajecafe.com/?#conciertos" id="navbarDropdown-3" role="button" data-bs-auto-close="outside">
              Música en directo
            </a>
          </li>
          <li class="nav-item dropdown dropdown-hover d-none">
            <a class="nav-link" href="https://garajecafe.com/?#fotos" id="navbarDropdown-3" role="button" data-bs-auto-close="outside">
              Fotos
            </a>
          </li>
          <li class="nav-item dropdown dropdown-hover">
            <a class="nav-link" href="https://garajecafe.com/?#quienes" id="navbarDropdown-3" role="button" data-bs-auto-close="outside">
              Quienes somos
            </a>
          </li>
          
          
          <li class="nav-item d-lg-none">
            <a href=""
              class="nav-link text-light">Nuestra Carta</a>
          </li>
        </ul>
      </div>
  
  
  
      <!-- mobile user menu -->
  
  
  
  
    </div>
  </nav>
  
  


  <!-- accordion -->
  <section class="py-15 py-xl-20 text-white" style="background-color: #221e0d;">
    <div class="background-section-plants"></div>
    <div class="container mt-10">
      <div class="row mb-10">
        <div class="col text-center">
          <h1 id="carta-garaje" class="mb-1">Carta de Garaje Café</h1>
        </div>
      </div>

      <!-- TABS -->
      <ul class="nav nav-tabs" id="myTab" role="tablist">

        <li class="nav-item ml-5" role="presentation">
          <button class="nav-link active h3" id="bebida-tab" data-bs-toggle="tab" data-bs-target="#bebida" type="button" role="tab" aria-controls="bebida" aria-selected="false">Bebida</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link h3" id="comida-tab" data-bs-toggle="tab" data-bs-target="#comida" type="button" role="tab" aria-controls="comida" aria-selected="true">Comida</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link h3" id="menugaraje-tab" data-bs-toggle="tab" data-bs-target="#menugaraje" type="button" role="tab" aria-controls="menugaraje" aria-selected="true">Menús Garaje</button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">

        <div class="tab-pane fade show active" id="bebida" role="tabpanel" aria-labelledby="bebida-tab">
          <div id="carta-bebida-zone" class="row g-3 g-xl-5">
            <div class="col-lg-6 align-self-center" id="carta-bebida-zone-col">
             
            </div>
            <div class="col-lg-6">
            </div>
          </div>
        </div>
        <div class="tab-pane fade " id="comida" role="tabpanel" aria-labelledby="comida-tab">
          <div id="clock" class="mt-4 ml-1 bold">Horario de cocina: <br>- De 12:30h a 15:30h <br>- De 19:30h a 23:30h</div>
          <div id="carta-zone" class="row g-3 g-xl-5">
            <div class="col-lg-6 align-self-center" id="carta-zone-col">
             
            </div>
            <div class="col-lg-6">
            </div>
          </div>


        </div>
        
        <div class="tab-pane fade " id="menugaraje" role="tabpanel" aria-labelledby="menugaraje-tab">
          <div id="clock" class="mt-4 ml-1 bold">Horario de cocina: <br>- De 12:30h a 15:30h <br>- De 19:30h a 23:30h</div>
          <div id="carta-zone" class="row g-3 g-xl-5">
            <div class="col-lg-6 align-self-center" id="carta-zone-col">
              <img src="1.jpeg" width="100%"/><br>
              <img src="2.jpeg" width="100%"/><br>
              <img src="3.jpeg" width="100%"/><br>
              <img src="4.jpeg" width="100%"/><br>
              <img src="5.jpeg" width="100%"/><br>
            </div>
            <div class="col-lg-6">
            </div>
          </div>


        </div>
      </div>

      <!-- END TABS-->
      
    </div>
  </section>

<!-- footer -->
<footer class="py-15 py-xl-20 bg-black inverted border-top">
  <div class="container">
    <div class="row g-4 g-lg-5 mb-10">
      <div class="col-md-5 text-center text-md-start"><img width="40%" src="../assets/images/garajecafe.png" alt="Logo">
      </div>
      
    </div>
    <div class="row align-items-center g-1 g-lg-6 text-muted">
      <div class="col-md-6 col-lg-5 order-lg-2 text-center text-md-start">
        <ul class="list-inline small">
          <li class="list-inline-item"><a href="" class="text-reset text-primary-hover">facebook</a></li>
          <li class="list-inline-item ms-1"><a href="" class="text-reset text-primary-hover">twitter</a></li>
          <li class="list-inline-item ms-1"><a href="" class="text-reset text-primary-hover">linkedin</a></li>
        </ul>
      </div>
      <a href="" class="col-md-6 col-lg-4 text-center text-md-end order-lg-3">
        <span class="small">Paseo Marítimo de Palma, 45</span>
      </a>
      <div class="col-lg-3 order-lg-1 text-center text-md-start">
        <p class="small">Copyrights © 2021</p>
      </div>
    </div>
  </div>
</footer>

  <!-- javascript -->
  <script src="../assets/js/vendor.bundle.js"></script>
  <script src="../assets/js/index.bundle.js"></script>
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/js/airtable.browser.js"></script>
  <script>
    var Airtable = require('airtable');

    Airtable.configure({
        endpointUrl: 'https://api.airtable.com',
        apiKey: 'keyo0E7W5gHCFV6RI'
    });
    var base = Airtable.base('app1uvRsd1WbW8T4m');

    //READ COMIDA
          base('Carta de Comidas').select({
              // Selecting the first 3 records in Grid view:
              maxRecords: 150,
              view: "Grid view"
          }).eachPage(function page(records, fetchNextPage) {
              // This function (`page`) will get called for each page of records.

              //GET CATEGORIES
              let arrayCategories=[]
              records.forEach(function(record) {
                  //console.log('Retrieved', record.get('id-categoria'));
                  arrayCategories.push(record.get('Categoria'))
                  //CREATE THE CATEGORIA ELEMENT
                  if($('#accordion-'+record.get('id-categoria')).length==0){
                      $("#carta-zone-col").html($("#carta-zone-col").html()+`<div class="card border bg-white text-dark  mt-3 mt-xl-5">
                            <div class="card-body">
                              <h3 class="fs-4 my-3">`+record.get('Categoria')+`</h3>
                              <div class="accordion" id="accordion-`+record.get('id-categoria')+`">
                                
                                
                                
                              </div>
                              
                            </div>
                          </div>`)
                        }
              });

              //Remove repeated categories
                arrayCategories = arrayCategories.filter(function(item, pos) {
                    return arrayCategories.indexOf(item) == pos;
                })
              //LOOP FOR EVERY CATEGORY
              arrayCategories.forEach((category)=>{
                  recordItem=0;
                  records.forEach(function(record) {
                      //FILTER THE ACCORDION ELEMENT
                        if(category===record.get('Categoria')){
                          //console.log('acc item: ', category+": " +record.get('Titulo'));
                          let titulo=record.get("Titulo")+` - `+record.get("Precio")
                          let description=!record.get("Descripción")?"":record.get("Descripción")
                          //DETECT LANGUAGE
                            if(isOtherLanguage()){
                              //titulo=record.get("Titulo_en")+` - `+record.get("Precio")
                              //description=!record.get("Descripción_en")?"":record.get("Descripción_en")
                            }
                          //CREATE THE ACCORDION ITEM
                            $('#accordion-'+record.get('id-categoria')).append(`<div class="accordion-item">
                                    <h2 class="accordion-header" id="heading-`+record.get('id-categoria')+`-`+recordItem+`">
                                      <button class="accordion-button lead collapsed" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#collapse-`+record.get('id-categoria')+`-`+recordItem+`" aria-expanded="false" aria-controls="collapse-`+record.get('id-categoria')+`-`+recordItem+`">
                                        `+ titulo +`
                                      </button>
                                    </h2>
                                    <div id="collapse-`+record.get('id-categoria')+`-`+recordItem+`" class="accordion-collapse collapse" aria-labelledby="heading-`+record.get('id-categoria')+`-`+recordItem+`"
                                      data-bs-parent="#accordion-`+record.get('id-categoria')+`">
                                      <div class="accordion-body">
                                        <p class="text-secondary">`+ description +`</p>
                                      </div>
                                    </div>
                                  </div>`)

                                  recordItem=recordItem+1
                        }
                  });
              })
                  


              // To fetch the next page of records, call `fetchNextPage`.
              // If there are more records, `page` will get called again.
              // If there are no more records, `done` will get called.
              fetchNextPage();

          }, function done(err) {
              if (err) { console.error(err); return; }
          });


     //READ BEBIDAS
          

          base('Carta de Bebidas').select({
              // Selecting the first 3 records in Grid view:
              maxRecords: 150,
              view: "Grid view"
          }).eachPage(function page(records, fetchNextPage) {
              // This function (`page`) will get called for each page of records.

              //GET CATEGORIES
              let arrayCategories=[]
              records.forEach(function(record) {
                  //console.log('Retrieved', record.get('id-categoria'));
                  arrayCategories.push(record.get('Categoria'))
                  //CREATE THE CATEGORIA ELEMENT
                  if($('#accordion-bebida-'+record.get('id-categoria')).length==0){
                      $("#carta-bebida-zone-col").html($("#carta-bebida-zone-col").html()+`<div class="card border bg-white text-dark  mt-3 mt-xl-5">
                            <div class="card-body">
                              <h3 class="fs-4 my-3">`+record.get('Categoria')+`</h3>
                              <div class="accordion-bebida" id="accordion-bebida-`+record.get('id-categoria')+`">
                                
                                
                                
                              </div>
                              
                            </div>
                          </div>`)
                        }
              });

              //Remove repeated categories
                arrayCategories = arrayCategories.filter(function(item, pos) {
                    return arrayCategories.indexOf(item) == pos;
                })
              //LOOP FOR EVERY CATEGORY
              //alert(isNight)
              arrayCategories.forEach((category)=>{
                  recordItem=0;
                  records.forEach(function(record) {
                      //FILTER THE ACCORDION ELEMENT
                        if(category===record.get('Categoria')){
                          //console.log('acc item: ', category+": " +record.get('Titulo'));
                          //CREATE THE ACCORDION ITEM
                            let precioPublico=record.get("Precio")
                            
                            if(isNight && precioPublico!=undefined){
                              precioPublico=record.get("Precio noche")
                            }

                            let titulo = record.get("Titulo")+` - `+precioPublico;
                          
                            //DETECT LANGUAGE
                              if(isOtherLanguage()){
                                //titulo = record.get("Titulo_en")+` - `+precioPublico;
                              }
                          
                              $('#accordion-bebida-'+record.get('id-categoria')).append(`<div class="accordion-bebida-item">
                                    <h2 class="accordion-bebida-header" id="heading-bebida-`+record.get('id-categoria')+`-`+recordItem+`">
                                      <div class="accordion-button lead collapsed no-knob">
                                        `+ titulo +`
                                      </div>
                                    </h2>
                                  </div>`)
                            
                            

                                  recordItem=recordItem+1
                        }
                  });
              })
                  


              // To fetch the next page of records, call `fetchNextPage`.
              // If there are more records, `page` will get called again.
              // If there are no more records, `done` will get called.
              fetchNextPage();

          }, function done(err) {
              if (err) { console.error(err); return; }
          });
    
    
        function isOtherLanguage(){
            if(navigator.language.indexOf("es")>=0 || navigator.language.indexOf("ES")>=0){
              return false
            }
            else{
              
              $("#bebida-tab").html("Drinks")
              $("#comida-tab").html("Meals")
              $("#carta-garaje").html("Garaje Café Menu")
              $("#clock").html("Kitchen hours: <br>- From 12:30h to 15:30h <br>- From 19:30h to 23:30h")
              return true;
            }
          }
  </script>


</body>

</html>
